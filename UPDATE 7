SAMPLE CODE:---- Validation to check employee's existing element entry for same holiday date
	  BEGIN


	  v_chk_ele_ent := 0 ;

           SELECT count(1) into v_chk_ele_ent
			FROM
			PAY_ELEMENT_TYPES_F PETF ,
			PAY_ELEMENT_ENTRIES_F PEEF ,
			PER_ALL_ASSIGNMENTS_F PAAF ,
			PER_ALL_PEOPLE_F PAPF ,
			PAY_ELEMENT_ENTRY_VALUES_F PEEVF ,
			PAY_INPUT_VALUES_F PIVF
			WHERE 1 = 1
			and PAPF.employee_number = rec_ofl_bank_data.employee_number
			and pivf.name ='Effective Date'
			and TO_CHAR(rec_ofl_bank_data.holiday_date,'RRRR/MM/DD HH24:MI:SS') = PEEVF.SCREEN_ENTRY_VALUE
			AND PEEF.ELEMENT_TYPE_ID = PETF.ELEMENT_TYPE_ID
			AND PIVF.ELEMENT_TYPE_ID = PETF.ELEMENT_TYPE_ID
			AND rec_ofl_bank_data.holiday_date BETWEEN TRUNC(PEEF.EFFECTIVE_START_DATE) AND TRUNC(PEEF.EFFECTIVE_END_DATE)
			AND rec_ofl_bank_data.holiday_date BETWEEN TRUNC(PIVF.EFFECTIVE_START_DATE) AND TRUNC(PIVF.EFFECTIVE_END_DATE)
			AND PAAF.ASSIGNMENT_ID = PEEF.ASSIGNMENT_ID
			AND rec_ofl_bank_data.holiday_date BETWEEN TRUNC(PAAF.EFFECTIVE_START_DATE) AND TRUNC(PAAF.EFFECTIVE_END_DATE)
			AND PAPF.PERSON_ID = PAAF.PERSON_ID
			AND PAPF.CURRENT_EMP_OR_APL_FLAG = 'Y'
			AND rec_ofl_bank_data.holiday_date BETWEEN TRUNC(PAPF.EFFECTIVE_START_DATE) AND TRUNC(PAPF.EFFECTIVE_END_DATE)
			AND PEEVF.ELEMENT_ENTRY_ID = PEEF.ELEMENT_ENTRY_ID
			AND PIVF.INPUT_VALUE_ID = PEEVF.INPUT_VALUE_ID
			AND paaf.primary_flag = 'Y'
			AND paaf.assignment_type = 'E'
			AND rec_ofl_bank_data.holiday_date BETWEEN TRUNC(PEEVF.EFFECTIVE_START_DATE) AND TRUNC(PEEVF.EFFECTIVE_END_DATE)
			AND PETF.ELEMENT_NAME = 'Off In Lieu Bank Adjustment'
			and papf.business_group_id = 81;

         EXCEPTION
            WHEN NO_DATA_FOUND
            THEN
               v_valid_rec_det := 'Y';
               v_err_msg := 'Creating Element Entry for SN := '||rec_ofl_bank_data.employee_number || ' For Holiday Date := '||rec_ofl_bank_data.holiday_date;
               fnd_file.put_line (fnd_file.LOG,
                                     v_err_msg
                                 );
            WHEN OTHERS
            THEN
               v_valid_rec_det := 'N';
               v_err_msg := 'Error in checking Element Entry for SN := '||rec_ofl_bank_data.employee_number || ' For Holiday Date := '||rec_ofl_bank_data.holiday_date|| SUBSTR (SQLERRM, 1, 100);
               fnd_file.put_line (fnd_file.LOG,
                                    v_err_msg
                                 );
         END;

		 IF v_chk_ele_ent <> 0
		 THEN

		 v_valid_rec_det := 'N';
         v_err_msg := 'Off In Lieu Bank Adjustment Element Entry already exists for SN := '||rec_ofl_bank_data.employee_number || ' For Holiday Date := '||rec_ofl_bank_data.holiday_date;
         fnd_file.put_line (fnd_file.LOG,
                                    v_err_msg
                                 );
		END IF;

	IF v_valid_record = 'Y' and v_valid_rec_det = 'Y'
     THEN
		BEGIN


            fnd_date.initialize ('DD-MON-RRRR', NULL);
                pay_batch_element_entry_api.create_batch_line (
                    p_session_date           => TRUNC (SYSDATE),
                    p_batch_id               => l_batch_id,
                    p_assignment_id          => rec_ofl_bank_data.assignment_id,
                    p_assignment_number     => rec_ofl_bank_data.assignment_number,
                    p_effective_date        => rec_ofl_bank_data.holiday_date,
                    p_element_name          => 'Off In Lieu Bank Adjustment',
                    p_element_type_id         => v_element_type_id,
                   -- p_attribute10           =>'Y',
                    p_value_1                 => 1,
                    p_value_2                 => rec_ofl_bank_data.holiday_date,
                    p_batch_line_id            => v_batch_line_id,
                    p_object_version_number => v_batch_object_version_number);

               fnd_file.put_line (fnd_file.output,
                                     'Off In Lieu Bank for Employee Number :  '
                                  || rec_ofl_bank_data.employee_number
                                  || '     Created Successfully with :'
                                  || 1
                                  || '     Days for Holiday Date := '||rec_ofl_bank_data.holiday_date
                                 );


              EXCEPTION
               WHEN OTHERS
               THEN
                  v_valid_rec_det := 'N';

                  v_err_msg :=
                        'Error during element entry Batch API: '
                     || SUBSTR (SQLERRM, 1, 100);
                  fnd_file.put_line (fnd_file.LOG,
                                        'Employee Number: '
                                     || rec_ofl_bank_data.employee_number
                                     || v_err_msg
                                    );

      END;
	END IF;
END Loop;


		BEGIN
        fnd_global.apps_initialize (l_user_id, l_resp_id , l_resp_appl_id);
        v_request_id1 :=
            fnd_request.submit_request (
                application   => 'PER',
                program       => 'PAYLINK(TRANSFER)',
                description   => 'Transfers BEE batch',
                start_time    => SYSDATE,
                sub_request   => FALSE,
                argument1     => 'BATCHEE',
                argument2     => 'TRANSFER',
                argument3     => l_batch_id);
        COMMIT;
     fnd_file.put_line (fnd_file.output,
                                     v_batch_name||' BEE transferred successfully '
                                 );
    END;

	 EXCEPTION
      WHEN OTHERS
      THEN
         fnd_file.put_line (fnd_file.LOG,
                            'Error In Main Program' || SUBSTR(SQLERRM,1,100) || SQLCODE);
 MY CODE:
 ---- Validation to check employee's existing element entry
      BEGIN
	  v_chk_ele_ent := 0;

      SELECT COUNT(1)
           INTO v_chk_ele_ent
           FROM pay_element_entries_f peef,
                pay_element_types_f petf,
                per_all_assignments_f paaf
            WHERE 1=1
            AND petf.element_type_id = peef.element_type_id
            AND paaf.assignment_id = peef.assignment_id
            AND paaf.assignment_id = rec.assignment_id
            AND petf.element_name = 'Off In Lieu Bank Balance'
            AND TRUNC(SYSDATE) BETWEEN TRUNC(peef.effective_start_date)
                                    AND TRUNC(peef.effective_end_date)
			AND TRUNC(SYSDATE) BETWEEN TRUNC(paaf.effective_start_date)
                                    AND TRUNC(paaf.effective_end_date)
			AND TRUNC(SYSDATE) BETWEEN TRUNC(petf.effective_start_date)
                                    AND TRUNC(petf.effective_end_date);
								
      EXCEPTION
         WHEN OTHERS THEN
            v_chk_ele_ent := 0;

      END;

      IF v_chk_ele_ent = 0 THEN

         BEGIN
            pay_batch_element_entry_api.create_batch_line (
               p_session_date           => TRUNC(SYSDATE),
               p_batch_id               => l_batch_id,
               p_assignment_id          => rec.assignment_id,
               p_assignment_number      => rec.assignment_number,
               p_effective_date         => v_start_date,
               p_element_name           => 'Off In Lieu Bank Balance',
               p_element_type_id        => v_element_type_id,
               p_value_1                => 1,
               p_batch_line_id          => v_batch_line_id,
               p_object_version_number  => v_batch_object_version_number);

            fnd_file.put_line(fnd_file.OUTPUT,
               'Element created for Employee: '||rec.employee_number||
               ' on '||TO_CHAR(v_start_date,'DD-MON-YYYY'));
         EXCEPTION
            WHEN OTHERS THEN
               fnd_file.put_line(fnd_file.LOG,
                  'Error creating element for Employee '||rec.employee_number||': '||SUBSTR(SQLERRM,1,100));
         END;
      ELSE
         fnd_file.put_line(fnd_file.LOG,
            'Element already exists for Employee: '||rec.employee_number||' as on sysdate.');
      END IF;
   END LOOP;


   BEGIN
      fnd_global.apps_initialize(l_user_id, l_resp_id , l_resp_appl_id);
      v_request_id1 := fnd_request.submit_request(
         application   => 'PER',
         program       => 'PAYLINK(TRANSFER)',
         description   => 'Transfer BEE Batch',
         start_time    => SYSDATE,
         sub_request   => FALSE,
         argument1     => 'BATCHEE',
         argument2     => 'TRANSFER',
         argument3     => l_batch_id);
      COMMIT;
      fnd_file.put_line(fnd_file.OUTPUT, v_batch_name || ' BEE transferred successfully.');
   EXCEPTION
      WHEN OTHERS THEN
         fnd_file.put_line(fnd_file.LOG, 'Error transferring BEE batch: ' || SUBSTR(SQLERRM,1,100));
   END;

EXCEPTION
   WHEN OTHERS THEN
      fnd_file.put_line(fnd_file.LOG, 'Error in main program: ' || SUBSTR(SQLERRM,1,100));
END OA_Shift_OffinLieu_Entry_proc;   

